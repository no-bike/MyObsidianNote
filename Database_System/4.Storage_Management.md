






#### 缓冲区管理

管理缓冲池的使用
==缓冲区管理器负责在**内存和磁盘之间**复制文件页==
![[Pasted image 20240424104003.png]]
##### 缓冲池（buffer pool）
DBMS可以在内存区域划分==**页数组**==，称作缓冲池
缓冲池中的页称为**页框**(frame)
![[Pasted image 20240424103735.png]]

##### 缓冲池设计
###### 页表(Page Table)
==页表==将**页号**(Page ID)映射为该页所在**页框的地址**
可用==**内存哈希表**==实现，用页号做哈希表的键
![[Pasted image 20240424104358.png]]

###### 页框的元数据

DBMS用两个变量记录缓冲池中每个页框的状态：
在读写内存中的页之前，必须执行函数PinPage，将PinCount+1，结束后执行函数unPinPage，将PinPage-1.
==**Pin_Count**==:页框当中的页被请求但未释放的次数，即引用次数，作用主要是查看缓冲池中的页是否正在被引用或被多少引用，以便于当缓冲池满的时候在缓冲池中删除没有正在被引用的页。

==**Dirty**==：自从页框中的页被读入缓冲池后，页是否被修改过

##### 缓冲区管理器的功能
###### 页替换策略
![[Pasted image 20240424111455.png]]

LRU策略替换策略==需要频繁更改优先队列（以时间为顺序）


时钟替换策略是上述策略的一个优化

![[Pasted image 20240424111706.png]]
![[Pasted image 20240424111728.png]]


