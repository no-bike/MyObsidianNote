
# 1. 调试分析 Linux 0.00 引导程序

## 1. 简述 `head.s` 的工作原理

 - 初始化GDT和IDT，设置GDHR和IDTR。
- 设置8253定时芯片。
- 设置定时中断门描述符和系统调用陷阱门描述符，分别在IDT表的第8项和第128项。
- 利用`iret`命令，跳转到程序 任务0

## 2. 记录 `head.s` 的内存分布状况

| 代码段编号 | 名称               | 起始地址   | 终止地址   |
| ----- | ---------------- | ------ | ------ |
| 1     | startup_32       | 0x00   | 0xac   |
| 2     | setup_gdt        | 0xad   | 0xb4   |
| 3     | setup_idt        | 0xb5   | 0xcd   |
| 4     | rp_idt           | 0xd2   | 0xe4   |
| 5     | write_char       | 0xe5   | 0x113  |
| 6     | ignore_int       | 0x114  | 0x129  |
| 7     | timer_interrupt  | 0x12a  | 0x165  |
| 8     | system_interrupt | 0x166  | 0x17c  |
| 9     | task0            | 0x10e0 | 0x10f3 |
| 10    | task1            | 0x10f4 | 0x1107 |

| 数据段编号 | 名称          | 起始地址  | 终止地址  |
| ----- | ----------- | ----- | ----- |
| 1     | current     | 0x17d | 0x180 |
| 2     | scr_loc     | 0x181 | 0x184 |
| 3     | lidt_opcode |       |       |
| 4     | lgdt_opcode |       |       |
| 5     |             |       |       |
| 6     |             |       |       |
| 7     |             |       |       |
| 8     |             |       |       |
| 9     |             |       |       |
| 10    |             |       |       |
